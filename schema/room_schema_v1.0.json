{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Zork I Cartographic Atlas Room Schema v1.0",
  "type": "object",
  "required": ["title", "sections"],
  "additionalProperties": false,

  "properties": {
    "title": {
      "type": "string",
      "pattern": "^Z1 - .+",
      "description": "Exactly one H1. Must begin with 'Z1 - '."
    },

    "sections": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "Description (verbatim)",
        "Exits (as reported)",
        "Blocked movements",
        "Hidden/conditional transitions",
        "Objects present",
        "Hazards/NPCs",
        "Key parser interactions",
        "State notes",
        "Mapping notes"
      ],

      "properties": {

        "Description (verbatim)": {
          "type": "string",
          "minLength": 1
        },

        "Exits (as reported)": {
          "type": "array",
          "items": {
            "type": "string",
            "pattern": "^(?:N|S|E|W|NE|NW|SE|SW|U|D|WAIT|LAND|LAUNCH)(?:/(?:N|S|E|W|NE|NW|SE|SW|U|D))? ?â†’ ?\\[\\[Z1 - .+\\]\\]$"
          }
        },

        "Blocked movements": {
          "type": "array",
          "items": { "type": "string" }
        },

        "Hidden/conditional transitions": {
          "type": "array",
          "items": { "type": "string" }
        },

        "Objects present": {
          "type": "array",
          "items": { "type": "string" }
        },

        "Hazards/NPCs": {
          "type": "array",
          "items": { "type": "string" }
        },

        "Key parser interactions": {
          "type": "array",
          "items": { "type": "string" }
        },

        "State notes": {
          "type": "array",
          "items": { "type": "string" }
        },

        "Mapping notes": {
          "type": "object",
          "required": ["Internal ID", "First mapped"],
          "additionalProperties": false,
          "properties": {
            "Internal ID": {
              "type": "string",
              "pattern": "^Z1-R-\\d{3}$"
            },
            "First mapped": {
              "type": "string"
            },
            "Revisions": {
              "type": "string"
            },
			"Notes": {
				"type": "array",
				"items": { "type": "string" }
			}
          }
        }
      }
    }
  }
}
